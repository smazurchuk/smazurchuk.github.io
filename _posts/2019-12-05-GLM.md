---
# Feel free to add content and custom Front Matter to this file.
# To modify the layout, see https://jekyllrb.com/docs/themes/#overriding-theme-defaults

layout: post
title: Creating a GLM for SOE Data
date: 2019-12-05
---

# {{ page.title }}

I thought it might be useful to have a little tutorial about how the GLM maps are created for the SOE data. I am basing this off the current method I found in Tony's script.

## Build Regressors
The first step is to build regressors. Tony has a script, `regressors.py` which which has several functions:
 * build_large_file - converts psychopy table into python variable with proper format
 * demean_and_write - groups reaction time into 6 groups (2 per session), and converts reaction times into z-scores
 * word_length   - creates word-length as a nuisance regressor
 * word_stim_time   - creates 1d arrays for target word and all other words
 * copy_anat      - uses `3dcopy` to copy anatomy files (not sure why?)

At the end of all this work, we have generated the files

## 3dDeconvolve
Tony then has a script for running 3d deconvolve which has the following functions:
 * extract_words - creates list of words
 * separate_words - 
 * Set_the_deconvolve_line - 
 * Set_the_Remlfit_line - 

# Running the Script
The last part of the script is used to generate the $$\beta$$ values

# Final Steps
Tony has already run the regression script for each patient, so all that remains is setting the deconvolve command. This can be done by simply submitting the script.



When creating a GLM all regressors need to be combined into a large matrix. We can create a python function which copies CSV files

# Thoughts / Q's
* Why is SMPG1 used instead of a multiple basis functions?
